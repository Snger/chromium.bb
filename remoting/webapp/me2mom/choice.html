<!doctype html>
<!--
Copyright (c) 2011 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<html>
  <head>
    <meta charset="utf-8" />
    <link href="http://fonts.googleapis.com/css?family=Droid+Sans&amp;v1"
          rel="stylesheet" type="text/css">
    <link rel="shortcut icon" href="chromoting128.png" />
    <link rel="stylesheet" href="debug_log.css" />
    <link rel="stylesheet" href="main.css" />
    <link rel="stylesheet" href="choice.css" />
    <link rel="stylesheet" href="toolbar.css" />
    <script src="client_session.js"></script>
    <script src="debug_log.js"></script>
    <script src="l10n.js"></script>
    <script src="oauth2.js"></script>
    <script src="plugin_settings.js"></script>
    <script src="remoting.js"></script>
    <script src="xhr.js"></script>
    <title i18n-content="pageTitle"></title>
  </head>

  <body onLoad="remoting.init();"
        onUnload="remoting.disconnect();">

    <!-- loading-mode is initially visible, but becomes hidden as soon as an
         AppMode is selected by remoting.init. All other divs are initially
         hidden, but are shown appropriately when the mode changes. -->
    <!-- TODO(jamiewalch): This string is not localized because by the time we
         get around to running localize(), it's hidden anyway. -->
    <section id="loading-mode" data-ui-mode="">
      <em>Loading&hellip;</em>
    </section> <!-- loading-mode -->

    <div id="control-panel" data-ui-mode="client host" hidden>
      <span id="email-status">
        <span class="auth-status-label" i18n-content="emailLabel"></span>
        <span id="current-email"></span>
      </span> <!-- email-status -->

      <span id="oauth2-entry">
        <span class="auth-status-label"
              i18n-content="oauth2TokenLabel"></span>
        <button id="oauth2-token-button" type="button"
                onclick="remoting.oauth2.doAuthRedirect();"
                i18n-content="authenticateButton"></button>
        <button id="oauth2-clear-button" type="button"
                onclick="remoting.clearOAuth2();"
                i18n-content="revokeButton"></button>
      </span> <!-- oauth2-entry -->

      <span id="debug-enable">
        <button type="button" onclick="remoting.toggleDebugLog();"
                i18n-content="debugButton"></button>
      </span> <!-- debug-enable -->
    </div> <!-- control-panel -->

    <div id="session-toolbar"
         data-ui-mode="in-session"
         class="toolbar-container"
         hidden>
      <div class="toolbar-border">
        <span id="session-status-message" i18n-content="labelConnected"></span>
        <strong id="connected-to"></strong>
        <button type="button" onclick="remoting.disconnect();"
                i18n-content="disconnectButton"></button>
        <span class="right-align">
          <button type="button" onclick="remoting.toggleDebugLog();"
                  i18n-content="debugButton"></button>
          <button type="button" onclick="remoting.toggleScaleToFit();"
                  i18n-content="scaleButton"></button>
        </span>
      </div>
      <div class="toolbar-stub">
        <img src="toolbar-stub.png">
      </div>
    </div> <!-- session-toolbar -->

    <section id="choice-mode" data-ui-mode="host client" hidden>
      <header class="choice-header">
        <img id="icon" src="chromoting128.png">
        <h1 data-ui-mode="host" class="icon-label">
          <span i18n-content="pageTitle">
          </span>&nbsp;&rsaquo;&nbsp;<span i18n-content="modeShare">
          </span>
        </h1>
        <h1 data-ui-mode="client" class="icon-label">
          <span i18n-content="pageTitle">
          </span>&nbsp;&rsaquo;&nbsp;<span i18n-content="modeConnect">
          </span>
        </h1>
        <img id="divider-top" src="dividertop.png">
      </header>

      <div id="host-panel" data-ui-mode="host">
        <div data-ui-mode="host.unshared">
          <div class="description" i18n-content="descriptionShare"></div>
          <div class="centered-button">
            <button id="share-button" class="auth-status-control big-button"
                    type="button" onclick="remoting.tryShare();"
                    i18n-content="shareButton"></button>
          </div>
        </div> <!-- host.unshared -->

        <div data-ui-mode="host.waiting-for-code" class="message"
             i18n-content="messageGenerating">
        </div> <!-- host.waiting-for-code -->

        <div data-ui-mode="host.waiting-for-connection">
          <div class="description" i18n-content="instructionsShareAbove"></div>
          <div id="access-code-display"></div>
          <div id="access-code-countdown-container">
            <div id="access-code-countdown" class="expiring" hidden>
              <span i18n-content="accessCodeTimer"></span>
              0:<span id="seconds-remaining"></span>
            </div>
          </div>
          <div class="description" i18n-content="instructionsShareBelow"></div>
        </div> <!-- host.waiting-for-connection -->

        <div data-ui-mode="host.shared">
          <div id="host-shared-message" class="message"
               i18n-content="messageShared"></div>
          <div class="centered-button">
            <button type="button" class="big-button"
                    onclick="remoting.cancelShare();"
                    i18n-content="stopSharingButton">
            </button>
          </div>
        </div> <!-- host.shared -->

        <div data-ui-mode="host.share-failed" class="message">
          <span id="unable-to-get-token" class="error-state"
               i18n-content="unableToGetToken">
          </span>
          <div class="centered-button">
            <button type="button" class="big-button"
                    onclick="remoting.setMode('host.unshared');"
                    i18n-content="ok">
            </button>
          </div>
        </div> <!-- host.share-failed -->
      </div> <!-- host-panel -->

      <div id="client-panel" data-ui-mode="client">
        <div data-ui-mode="client.unconnected">
          <div class="description" i18n-content="descriptionConnect"></div>
          <div id="access-code-entry-row">
            <form action="" onsubmit="remoting.tryConnect(); return false;">
              <label class="auth-status-control" for="access-code-entry"
                     i18n-content="accessCode"></label>
              <input id="access-code-entry" class="auth-status-control"
                     type="text"/>
              <button id="connect-button" class="auth-status-control big-button"
                      type="submit" i18n-content="connectButton"></button>
            </form>
          </div> <!-- code-entry-row -->
        </div> <!-- client.unconnected -->

        <!-- TODO(jamiewalch): Implement Cancel, being careful when ignoring
             the eventual server response not to ignore responses for any
             subsequent requests. This should be unified with the host-side
             Cancel button in the footer.
          -->
        <div data-ui-mode="client.connecting" class="message"
             i18n-content="verifyingCode">
        </div> <!-- client.connecting -->

        <div data-ui-mode="client.connect-failed"
             class="message">
          <span id="connect-error-message" class="error-state"></span>
        </div> <!-- client.connect-failed -->

        <div data-ui-mode="client.session-finished"
             class="message" i18n-content="messageSessionFinished">
        </div> <!-- client.session-finished -->

        <div data-ui-mode="client.connect-failed client.session-finished"
             class="centered-button">
          <button type="button" class="big-button" i18n-content="ok"
                  onclick="remoting.setMode(
                               remoting.AppMode.CLIENT_UNCONNECTED);">
          </button>
        </div>
      </div> <!-- client-panel -->

      <footer class="choice-footer">
        <img id="divider-bottom" src="dividerbottom.png">

        <div id="client-footer-text" data-ui-mode="client.unconnected">
          <span i18n-content="footerClient1"></span><a
           class="switch-mode" href="#" i18n-content="footerClient2"
           onclick="remoting.setAppMode(remoting.AppMode.HOST);"></a><span
           i18n-content="footerClient3"></span>
        </div> <!-- client-footer-text -->

        <div id="client-footer-text-cros" data-ui-mode="client.unconnected"
             i18n-content="footerCrOS">
        </div> <!-- client-footer-text-cros -->

        <div id="host-footer-text" data-ui-mode="host.unshared">
          <span i18n-content="footerHost1"></span><a
           class="switch-mode" href="#" i18n-content="footerHost2"
           onclick="remoting.setAppMode(remoting.AppMode.CLIENT);"></a><span
           i18n-content="footerHost3"></span>
        </div> <!-- host-footer-text -->

        <div id="waiting-footer"
             data-ui-mode="host.waiting-for-connection host.waiting-for-code">
          <img src="spinner.gif">
          <span class="waiting icon-label" i18n-content="footerWaiting"></span>
          <button id="cancel-button" class="big-button"
                  onclick="remoting.cancelPendingOperation();"
                  i18n-content="cancel">
          </button>
        </div> <!-- waiting-footer -->
      </footer>
    </section> <!-- choice-mode -->

    <section id="session-mode" data-ui-mode="in-session client" hidden>
    </section> <!-- session-mode -->

    <div id="host-plugin-container" data-ui-mode="host" hidden>
    </div> <!-- host-plugin-container -->

    <section id="debug-log" hidden>
      <div id="statistics">
      </div>
      <div id="debug-messages">
      </div>
    </section> <!-- debug-log -->

  </body>
</html>
