<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <!-- Copyright 2011 Google Inc.  All rights reserved. -->
  <head>
    <META HTTP-EQUIV="Pragma" CONTENT="no-cache" />
    <META HTTP-EQUIV="Expires" CONTENT="-1" />
    <script type="text/javascript" src="nacltest.js"></script>
    <script type="application/x-javascript">
      //<![CDATA[
function setupTests(tester, plugin) {

    tester.addTest('PPB_Core::GetTime', function(status) {
      status.assert(plugin.testGetTime());
    });

    tester.addTest('PPB_Core::GetTimeTicks', function(status) {
      status.assert(plugin.testGetTimeTicks());
    });

    tester.addTest('PPB_Core::IsMainThread_FromMainThread', function(status) {
      status.assert(plugin.testIsMainThread_FromMainThread());
    });

    tester.addTest('PPB_Core::IsMainThread_FromNonMainThread',
                   function(status) {
      status.assert(plugin.testIsMainThread_FromNonMainThread());
    });

    tester.addTest('PPB_Core::AddRefResource+ReleaseResource',
                   function(status) {
      status.assert(plugin.testAddRefAndReleaseResource());
    });

    tester.addTest('PPB_Core::AddRefResource+Release(invalid)',
                   function(status) {
      status.assert(plugin.testAddRefAndReleaseInvalidResource());
    });

    tester.addTest('PPB_Core::CallOnMainThread_FromMainThread',
                   function(status) {
      status.assert(plugin.testCallOnMainThread_FromMainThread());
      status.waitForCallback('CallOnMainThreadCallback_FromMainThread', 1);
    });

    tester.addTest('PPB_Core::CallOnMainThread_FromMainThreadDelayed',
                   function(status) {
      status.assert(plugin.testCallOnMainThread_FromMainThreadDelayed());
      status.waitForCallback(
        'CallOnMainThreadCallback_FromMainThreadDelayed', 1);
    });

    tester.addTest('PPB_Core::CallOnMainThread_FromNonMainThread',
                   function(status) {
      status.assert(plugin.testCallOnMainThread_FromNonMainThread());
      status.waitForCallback('CallOnMainThreadCallback_FromNonMainThread', 1);
    });

    tester.addTest('PPB_Core::CallOnMainThread_ThreadStress', function(status) {
      status.assert(plugin.testCallOnMainThread_FromNonMainThreadStress());
      status.waitForCallback('CallOnMainThreadCallback_ThreadStress', 1);
    });
}
      //]]>
    </script>
    <title>PPAPI PPB_Core Test</title>
  </head>
  <body>
    <h1>PPAPI PPB_Core Test</h1>

    <embed type="application/x-nacl" id="test_nexe"
           name="nacl_module"
           src="ppapi_core.nmf"
           width="0" height="0" />

    <script type="text/javascript">
      //<![CDATA[
      var tester = new Tester();
      setupTests(tester, $('test_nexe'));
      tester.waitFor($('test_nexe'));
      tester.run();
      //]]>
    </script>
  </body>
</html>
