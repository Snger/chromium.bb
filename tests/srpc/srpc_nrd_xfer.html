<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <!-- Copyright 2008 Google Inc.  All rights reserved. -->
  <head>
    <title> SRPC Descriptor Passing Test </title>
    <META HTTP-EQUIV="Pragma" CONTENT="no-cache" />
    <META HTTP-EQUIV="Expires" CONTENT="-1" />
    <script type="text/javascript" src="nacltest.js"></script>
    <script type="application/x-javascript">
      //<![CDATA[
var shm_region_size = 65536;
var result_compare_string = 'Quod erat demonstrandum';

function enqueueTests(tester, server, client) {
  tester.addTest('socket_address_nacl_to_nacl', function() {
    var socket_address = server.start_server();
    var client_errors = client.sock_addr_client(socket_address);
    assertEqual(client_errors, 0);
    var server_errors = server.report();
    assertEqual(server_errors, 0);
  });
}
      //]]>
    </script>
  </head>
  <body>
    <h1> SRPC Descriptor Passing Test </h1>
    NOTE: Set NACL_ENABLE_EXPERIMENTAL_JAVASCRIPT_APIS=1 to run this test.
    <embed type="application/x-nacl" id="nacl_client"
           name="naclModule" width="0" height="0"
           src="srpc_nrd_client.nmf" />
    <embed type="application/x-nacl" id="nacl_server"
           name="naclModule" width="0" height="0"
           src="srpc_nrd_server.nmf" />

    <script type="text/javascript">
      //<![CDATA[
      var tester = new Tester();
      var server = $("nacl_server");
      var client = $("nacl_client");
      enqueueTests(tester, server, client);
      tester.waitFor(server, client);
      tester.run();
      //]]>
    </script>
  </body>
</html>
