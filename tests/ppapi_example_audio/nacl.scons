# -*- python -*-
# Copyright 2011 The Native Client Authors.  All rights reserved.
# Use of this source code is governed by a BSD-style license that can
# be found in the LICENSE file.

# This is a pepper audio example from examples/audio.

Import('env')

env.Prepend(CPPDEFINES=['XP_UNIX'])

nexe = env.ComponentProgram('ppapi_example_audio.nexe',
                            [ 'audio.cc' ],
                            EXTRA_LIBS=['${PPAPI_LIBS}',
                                        'ppapi_cpp',
                                        'platform',
                                        'gio',
                                        'pthread',
                                        'm'])

validate = env.CommandValidatorTestNacl('validate_ppapi_example_audio.out',
                                        image=[nexe])
# since we do not have an automated test - at least validate the image
env.AddNodeToTestSuite(validate,
                       ['validator_tests', 'small_tests'],
                       'validate_ppapi_example_audio')

# Note that the html is required to run this program.
env.Publish('ppapi_example_audio.nexe', 'run',
            ['ppapi_example_audio.html' ])
