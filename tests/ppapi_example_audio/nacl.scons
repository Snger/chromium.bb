# -*- python -*-
# Copyright 2011 The Native Client Authors.  All rights reserved.
# Use of this source code is governed by a BSD-style license that can
# be found in the LICENSE file.

# This is a pepper audio example from examples/audio.

Import('env')

env.Prepend(CPPDEFINES=['XP_UNIX'])

node = env.ComponentProgram('ppapi_example_audio.nexe',
                            [ 'audio.cc' ],
                            EXTRA_LIBS=['ppruntime',
                                        'ppapi_cpp',
                                        'imc',
                                        'platform',
                                        'gio',
                                        'pthread',
                                        'm',
                                        'srpc'])

test = env.CommandValidatorTestNacl('ppapi_example_audio.out',
                                    image=[node],
                                    )
# since we do not have an automated test - at validate the image
env.AddNodeToTestSuite(test,
                       ['validator_tests', 'small_tests'],
                       'validate_ppapi_example_audio')

# Note that the html is required to run this program.
env.Publish('ppapi_example_audio.nexe', 'run',
            ['ppapi_example_audio.html' ])
