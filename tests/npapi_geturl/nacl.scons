# Copyright (c) 2010 The Native Client Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

Import('env')

# TODO(robertm): fix this (might be just a C++ issue)
if env['TARGET_ARCHITECTURE'] == 'arm':
  Return()

env.Prepend(CPPDEFINES=['XP_UNIX'])

npapi_geturl_inputs = [
  'main.cc',
  'plugin.cc',
]

env.ComponentProgram('npapi_geturl.nexe', npapi_geturl_inputs,
                     EXTRA_LIBS=['google_nacl_imc',
                                 'google_nacl_npruntime',
                                 'pthread',
                                 'srpc'])

# Note that the html is required to run this program.
env.Publish('npapi_geturl.nexe', 'run',
            ['npapi_geturl.html', 'npapi_geturl_success.html'])
