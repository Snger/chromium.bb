<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <!-- Copyright (c) 2011 Google Inc.  All rights reserved. -->
  <head>
    <META HTTP-EQUIV="Pragma" CONTENT="no-cache" />
    <META HTTP-EQUIV="Expires" CONTENT="-1" />
    <script type="text/javascript" src="nacltest.js"></script>
    <script type="application/x-javascript">
//<![CDATA[
function setupTests(tester, plugin) {
  tester.addTest('PPB_Graphics2D::Create', function(status) {
    status.assert(plugin.testCreate());
  });
  tester.addTest('PPB_Graphics2D::IsGraphics2D', function(status) {
    status.assert(plugin.testIsGraphics2D());
  });
  tester.addTest('PPB_Graphics2D::Describe', function(status) {
    status.assert(plugin.testDescribe());
  });
  // This must be called first because it sets the entire graphics area to gray.
  tester.addTest('PPB_Graphics2D::ReplaceContents', function(status) {
    status.assert(plugin.testReplaceContents());
    status.waitForCallback('ReplaceContentsFlushCallback', 1);
  });
  // Adds a blue square at the top right.
  tester.addTest('PPB_Graphics2D::PaintImageData', function(status) {
    status.assert(plugin.testPaintImageData());
    status.waitForCallback('PaintImageDataFlushCallback', 1);
  });
  // Adds a yellow square at the bottom left.
  tester.addTest('PPB_Graphics2D::PaintImageDataEntire', function(status) {
    status.assert(plugin.testPaintImageDataEntire());
    status.waitForCallback('PaintImageDataEntireFlushCallback', 1);
  });
  // Adds a white square at the top left and then the middle.
  tester.addTest('PPB_Graphics2D::Scroll', function(status) {
    status.assert(plugin.testScroll());
    status.waitForCallback('ScrollFlushCallback', 1);
  });
  // Adds a green square at the top left (over white) and then the bottom right.
  tester.addTest('PPB_Graphics2D::ScrollEntire', function(status) {
    status.assert(plugin.testScrollEntire());
    status.waitForCallback('ScrollEntireFlushCallback', 1);
  });
  // Does not alter the image.
  tester.addTest('PPB_Graphics2D::Flush', function(status) {
    status.assert(plugin.testFlush());
    status.waitForCallback('FlushCallback', 1);
  });
  // Adds a red square at the top left (over green) 10 times.
  tester.addTest('PPB_Graphics2D::FlushAnimation', function(status) {
    status.assert(plugin.testFlushAnimation());
    status.waitForCallback('FlushAnimationCallback', 10);
  });
  tester.addTest('PPB_Graphics2D::Stress', function(status) {
    status.assert(plugin.testStress());
  });
}
      //]]>
    </script>
    <title>PPAPI PPB_Graphics2D Test</title>
  </head>
  <body>
    <h1>PPAPI PPB_Graphics2D Test</h1>

  <table>
  <tr><td width="120"> Expected Image <td width="120">Actual Image
  <tr>
  <td>
    <table width="90" height="90" bgcolor="#DDDDDD" cellspacing="0">
    <tr><td bgcolor="#FF7777"><td><td bgcolor="#7777FF">
    <tr><td><td bgcolor="#FFFFFF"><td>
    <tr><td bgcolor="#FFFF00"><td><td bgcolor="#00FF00">
    </table>
  <td>
    <embed type="application/x-nacl" id="test_nexe"
           name="nacl_module"
           src="ppapi_ppb_graphics2d.nmf"
           style="background-color:#FFFFFF"
           width="90" height="90" />
  <table>
  <br>
    <script type="text/javascript">
      //<![CDATA[
      var tester = new Tester();
      setupTests(tester, $('test_nexe'));
      tester.waitFor($('test_nexe'));
      tester.run();
      //]]>
    </script>
  </body>
</html>
