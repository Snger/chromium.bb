{
   newlib_free4
   Memcheck:Addr4
   ...
   fun:_free_r
}

{
   newlib_free1
   Memcheck:Addr1
   fun:_free_r
}

{
   newlib_malloc4
   Memcheck:Addr4
   ...
   fun:_malloc_r
}

{
   newlib_malloc1
   Memcheck:Addr1
   ...
   fun:_malloc_r
}

{
   exit_status1
   ThreadSanitizer:Race
   ...
   fun:NaClCommonSysExit
}

{
   glibc_free4
   Memcheck:Addr4
   fun:_int_free
   fun:free
}

{
   glibc_malloc4
   Memcheck:Addr4
   fun:_int_malloc
   fun:malloc
}

{
   glibc_free1
   Memcheck:Addr1
   fun:_int_free
   fun:free
}

{
   glibc_malloc1
   Memcheck:Addr1
   fun:_int_malloc
   fun:malloc
}

# Generic ld.so suppressions.
# Default Valgrind suppressions for ld.so specify both major and minor version
# numbers of glibc from the build machine. Because of this, we get false reports
# when this Valgrind binary is used on a machine with a different version of
# glibc.
# TODO(eugenis): Somehow fix this in Valgrind.
{
   ld.so hack
   Memcheck:Cond
   obj:/lib*/ld-2.*.so*
}

# Glibc's start_thread() does stack accesses before we can report the location of
# the thread's stack to ThreadSanitizer. Normally this is not a problem because
# we are ignoring all memory accesses in libpthread, but in NaCl one of these
# accesses is in the trampoline.
# This suppression should not match any user code because there is always a
# frame with ThreadSanitizer wrapper (tsan_start_thread in
# valgrind_interceptors.c) between start_thread and the user-provided thread
# function.
{
   glibc start_thread
   ThreadSanitizer:Race
   fun:*
   fun:start_thread
}
