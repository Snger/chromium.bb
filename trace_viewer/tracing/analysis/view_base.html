<!DOCTYPE html>
<!--
Copyright (c) 2013 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<link rel="import" href="/base/ui.html">

<script>
'use strict';

tv.exportTo('tracing.analysis', function() {
  var ViewBase = tv.ui.define('view-base');

  ViewBase.prototype = {
    __proto__: HTMLDivElement.prototype,

    decorate: function() {
    },

    get requiresTallView() {
      throw new Error('Not implemented');
    },

    set modelEvent(obj) {
      throw new Error('Not implemented');
    },

    get modelEvent() {
      throw new Error('Not implemented');
    },
  };

  ViewBase.decorateSubtype = function(baseConstructor, opt_defaultOptions) {
    if (baseConstructor.register !== undefined)
      throw new Error('Already decorated: ' + baseConstructor);

    var defaultOptions = opt_defaultOptions || {};

    baseConstructor.typeNameToViewInfoMap = {};
    baseConstructor.register = function(typeName,
                                           viewConstructor,
                                           opt_options) {
      if (baseConstructor.typeNameToViewInfoMap[typeName])
        throw new Error('Handler already registered for ' + typeName);

      var options = opt_options || defaultOptions;
      baseConstructor.typeNameToViewInfoMap[typeName] = {
        constructor: viewConstructor,
        options: options
      };
    };

    baseConstructor.unregister = function(typeName) {
      if (baseConstructor.typeNameToViewInfoMap[typeName] === undefined)
        throw new Error(typeName + ' not registered');
      delete baseConstructor.typeNameToViewInfoMap[typeName];
    };

    baseConstructor.getViewInfo = function(typeName) {
      return baseConstructor.typeNameToViewInfoMap[typeName];
    };
  };

  return {
    ViewBase: ViewBase
  };
});
</script>
