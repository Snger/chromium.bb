<!DOCTYPE html>
<!--
Copyright 2016 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->
<link rel="import" href="/components/neon-animation/animations/fade-out-animation.html">
<link rel="import" href="/components/neon-animation/animations/scale-up-animation.html">
<link rel="import" href="/components/neon-animation/neon-animation-runner-behavior.html">

<dom-module id='dialog-container'>
  <style>
    :host {
      background:transparent;
      z-index: 1000;
      margin: 20px;
      min-height: 100px;
      position: absolute;
      visibility: hidden;
    }
  </style>
  <template>
    <content></content>
  </template>
</dom-module>
<script>
  'use strict';
  Polymer({
    is: 'dialog-container',

    behaviors: [
      Polymer.NeonAnimationRunnerBehavior
    ],

    properties: {
      targetid: {
        type: String,
      },
      positionisfixed: {
        type: Boolean,
        value: false,
      },
      opened: {
        type: Boolean,
        value: false,
      },
      animationConfig: {
        type: Object,
        value: function() {
          return {
            'show': [{
              name: 'fade-in-animation',
              node: this,
            }],
            'hide': [{
              name: 'fade-out-animation',
              node: this,
            }],
          };
        }
      },
    },

    listeners: {
      'neon-animation-finish': '_onAnimationFinish'
    },
    _onAnimationFinish: function() {
      if (!this.opened) {
        this.style.visibility = 'hidden';
      } else {
        this.style.visibility = 'visible';
      }
    },

    updatePositionFromCoords: function(top, left) {
      if (!this.positionisfixed) {
        this.style.left = (left + 15) + 'px';
        this.style.top = (top + 15) + 'px';
      }
    },

    toggleFixed: function() {
      this.positionisfixed = !this.positionisfixed;
    },

    open: function() {
      this.opened = true;
      this.style.visibility = 'visible';
      this.playAnimation('show');
    },

    close: function() {
      this.opened = false;
      this.playAnimation('hide');
    },
  });
</script>
