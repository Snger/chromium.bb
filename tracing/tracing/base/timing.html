<!DOCTYPE html>
<!--
Copyright (c) 2014 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<link rel="import" href="/tracing/base/guid.html">

<script>
'use strict';
tr.exportTo('tr.b', function() {
  class Timing {
    static mark(groupName, functionName) {
      if (tr.isHeadless) {
        return {
          end() {}
        };
      }
      const guid = tr.b.GUID.allocateSimple();
      const markName = `${groupName} ${functionName}`;
      const startMarkName = `${markName} ${guid} start`;
      const endMarkName = `${markName} ${guid} end`;

      window.performance.mark(startMarkName);

      return {
        end() {
          window.performance.mark(endMarkName);
          window.performance.measure(markName, startMarkName, endMarkName);
        }
      };
    }
  }

  return {
    Timing,
  };
});
</script>
