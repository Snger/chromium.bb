<!DOCTYPE html>
<!--
Copyright 2017 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<link rel="import" href="/tracing/value/ui/histogram_set_configuration.html">

<script>
'use strict';

tr.b.unittest.testSuite(function() {
  test('update', function() {
    const conf = new tr.v.ui.HistogramSetConfiguration();
    let delta;
    conf.addListener({onConfigurationChanged(d) { delta = d; }});

    conf.searchQuery = 'q';
    assert.strictEqual('', delta.searchQuery.before);
    assert.strictEqual('q', delta.searchQuery.after);
    assert.strictEqual('q', conf.searchQuery);

    delta = undefined;
    conf.searchQuery = 'q';
    assert.isUndefined(delta);
  });
});
</script>
